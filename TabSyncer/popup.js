import{d as C,i as g,J as m,f as k,l as W,r as h,c as O,o as i,v as y,K as u,j as c,t as l,L as d,M as v,_ as T,F as A,I as S,G as j}from"./assets/index-C2HjBufq.js";import{g as x}from"./assets/settings-BHC_i2EU.js";const B={class:"popup-root"},N={class:"popup-title"},$=C({__name:"Popup",setup(V){const w=g("i18n",{}),b=m();function p(s){const e=s.split(".");let t=w==null?void 0:w[b];for(const n of e)if(t&&typeof t=="object")t=t[n];else return s;return typeof t=="string"?t:s}const o=k({language:"zh",snapshotOptions:{saveCurrentTab:!0,saveCurrentWindow:!0,saveAllWindows:!0,saveSplitWindows:!0}});async function f(){try{const s=await x(),e=s==null?void 0:s.data;o.value={language:(e==null?void 0:e.language)||"zh",snapshotOptions:(e==null?void 0:e.snapshotOptions)||{saveCurrentTab:!0,saveCurrentWindow:!0,saveAllWindows:!0,saveSplitWindows:!0}};const t=Object.entries(o.value.snapshotOptions).filter(([,n])=>n);if(t.length===1){const[n]=t[0];let a="";switch(n){case"saveCurrentTab":a="current_tab";break;case"saveCurrentWindow":a="current_window";break;case"saveAllWindows":a="all_windows";break;case"saveSplitWindows":a="split_windows";break}a&&r(a)}}catch(s){console.error("Failed to load settings:",s)}}function r(s){chrome.runtime.sendMessage({action:"save_snapshot",type:s}),window.close()}return W(()=>{f()}),(s,e)=>{const t=h("el-button");return i(),O("div",B,[y("h3",N,l(p("popup.title")),1),o.value.snapshotOptions.saveCurrentTab?(i(),u(t,{key:0,class:"popup-btn",onClick:e[0]||(e[0]=n=>r("current_tab"))},{default:d(()=>[v(l(p("popup.saveCurrentTab")),1)]),_:1})):c("",!0),o.value.snapshotOptions.saveCurrentWindow?(i(),u(t,{key:1,class:"popup-btn",onClick:e[1]||(e[1]=n=>r("current_window"))},{default:d(()=>[v(l(p("popup.saveCurrentWindow")),1)]),_:1})):c("",!0),o.value.snapshotOptions.saveAllWindows?(i(),u(t,{key:2,class:"popup-btn",onClick:e[2]||(e[2]=n=>r("all_windows"))},{default:d(()=>[v(l(p("popup.saveAllWindows")),1)]),_:1})):c("",!0),o.value.snapshotOptions.saveSplitWindows?(i(),u(t,{key:3,class:"popup-btn",onClick:e[3]||(e[3]=n=>r("split_windows"))},{default:d(()=>[v(l(p("popup.saveSplitWindows")),1)]),_:1})):c("",!0)])}}}),M=T($,[["__scopeId","data-v-b6a1a4b1"]]),_=A(M);_.provide("i18n",S);_.use(j);_.mount("#app");
